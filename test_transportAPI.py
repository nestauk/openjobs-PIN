#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Wed Apr 10 19:01:01 2019

@author: stef
"""

import urllib.request
import json

app_key = '6d207ab55f2768d85de4124b5fc4844c'
app_id = '87edbe5c'
lon_from= '-0.134649'
lat_from = '51.539258'
lon_to = '-0.088780'
lat_to = '51.506383'
dep_date = '2019-04-10'
dep_time = '07:00'
urlname = ('https://transportapi.com/v3/uk/public/journey/from/'
           'lonlat:{},{}/to/lonlat:{},{}/at/{}/{}.json?'
           'app_id={}&app_key={}&service=tfl')
urlname = urlname.format(lon_from,lat_from,lon_to,lat_to,dep_date,dep_time,app_id,app_key)
#urlobj=urllib.request.urlopen(urlname)
#content= urlobj.read()

with urllib.request.urlopen(urlname) as url:
    data = json.loads(url.read().decode())
    print(data['source'])

    
#%%
# The output is like:
'''
{
  "request_time": "2019-04-10T14:12:53+01:00",
  "source": "TfL journey planning API",
  "acknowledgements": "Transport for London",
  "routes": [
    {
      "duration": "00:41:00",
      "route_parts": [
        {
          "mode": "foot",
          "from_point_name": "25 St Pancras Way, Camden",
          "to_point_name": "Camden Town Station",
          "destination": "",
          "line_name": "",
          "duration": "00:16:00",
          "departure_time": "15:21",
          "arrival_time": "15:37",
          "coordinates": [
            [
              -0.13461,
              51.5393
            ],
            [
              -0.13507,
              51.53955
            ],
            [
              -0.13608,
              51.53914
            ],
            [
              -0.13635,
              51.53936
            ],
            [
              -0.13662,
              51.53968
            ],
            [
              -0.13662,
              51.53968
            ],
            [
              -0.13698,
              51.53983
            ],
            [
              -0.13698,
              51.53983
            ],
            [
              -0.13947,
              51.54069
            ],
            [
              -0.13989,
              51.5405
            ],
            [
              -0.14104,
              51.54003
            ],
            [
              -0.14167,
              51.53968
            ],
            [
              -0.14223,
              51.53933
            ],
            [
              -0.14244,
              51.53915
            ],
            [
              -0.14242,
              51.53929
            ],
            [
              -0.14249,
              51.5393
            ],
            [
              -0.14249,
              51.5393
            ],
            [
              -0.14259,
              51.53911
            ],
            [
              -0.14248,
              51.53917
            ],
            [
              -0.14246,
              51.53934
            ]
          ]
        },
        {
          "mode": "tube",
          "from_point_name": "Camden Town",
          "to_point_name": "London Bridge",
          "destination": "Morden via Bank",
          "line_name": "Northern",
          "duration": "00:14:00",
          "departure_time": "15:37",
          "arrival_time": "15:51",
          "coordinates": [
            [
              -0.14246,
              51.53934
            ],
            [
              -0.14248,
              51.53923
            ],
            [
              -0.14244,
              51.53889
            ],
            [
              -0.14209,
              51.53826
            ],
            [
              -0.14187,
              51.53775
            ],
            [
              -0.14175,
              51.53695
            ],
            [
              -0.14187,
              51.53307
            ],
            [
              -0.14172,
              51.53249
            ],
            [
              -0.14146,
              51.53188
            ],
            [
              -0.14106,
              51.53126
            ],
            [
              -0.1407,
              51.53092
            ],
            [
              -0.13891,
              51.52955
            ],
            [
              -0.13829,
              51.52913
            ],
            [
              -0.13735,
              51.52863
            ],
            [
              -0.13673,
              51.52838
            ],
            [
              -0.13506,
              51.52782
            ],
            [
              -0.13436,
              51.52775
            ],
            [
              -0.13357,
              51.52786
            ],
            [
              -0.13233,
              51.52834
            ],
            [
              -0.13233,
              51.52834
            ],
            [
              -0.12892,
              51.52967
            ],
            [
              -0.12634,
              51.53067
            ],
            [
              -0.12568,
              51.53084
            ],
            [
              -0.12218,
              51.53082
            ],
            [
              -0.12189,
              51.53084
            ],
            [
              -0.12189,
              51.53084
            ],
            [
              -0.11968,
              51.53097
            ],
            [
              -0.11421,
              51.53144
            ],
            [
              -0.10917,
              51.53187
            ],
            [
              -0.10642,
              51.53196
            ],
            [
              -0.10594,
              51.53189
            ],
            [
              -0.10594,
              51.53189
            ],
            [
              -0.1056,
              51.53184
            ],
            [
              -0.10176,
              51.53093
            ],
            [
              -0.09782,
              51.5299
            ],
            [
              -0.08991,
              51.52787
            ],
            [
              -0.08883,
              51.52749
            ],
            [
              -0.08841,
              51.52718
            ],
            [
              -0.08824,
              51.527
            ],
            [
              -0.08797,
              51.52657
            ],
            [
              -0.08768,
              51.52596
            ],
            [
              -0.08755,
              51.52498
            ],
            [
              -0.08755,
              51.52498
            ],
            [
              -0.0874,
              51.52394
            ],
            [
              -0.0869,
              51.52192
            ],
            [
              -0.08694,
              51.52156
            ],
            [
              -0.08737,
              51.5199
            ],
            [
              -0.08763,
              51.51922
            ],
            [
              -0.0878,
              51.51892
            ],
            [
              -0.0878,
              51.51892
            ],
            [
              -0.08869,
              51.51726
            ],
            [
              -0.08905,
              51.51593
            ],
            [
              -0.08954,
              51.51481
            ],
            [
              -0.08955,
              51.51438
            ],
            [
              -0.08873,
              51.51319
            ],
            [
              -0.0883,
              51.5128
            ],
            [
              -0.0879,
              51.51231
            ],
            [
              -0.0879,
              51.51231
            ],
            [
              -0.08764,
              51.512
            ],
            [
              -0.08684,
              51.51101
            ],
            [
              -0.08658,
              51.51055
            ],
            [
              -0.0866,
              51.51021
            ],
            [
              -0.08701,
              51.50889
            ],
            [
              -0.08758,
              51.50732
            ],
            [
              -0.08821,
              51.50612
            ],
            [
              -0.08861,
              51.50572
            ]
          ]
        },
        {
          "mode": "foot",
          "from_point_name": "London Bridge Station",
          "to_point_name": "10 Montague Close, Southwark",
          "destination": "",
          "line_name": "",
          "duration": "00:11:00",
          "departure_time": "15:51",
          "arrival_time": "16:02",
          "coordinates": [
            [
              -0.0886,
              51.50572
            ],
            [
              -0.08648,
              51.50577
            ],
            [
              -0.08706,
              51.50575
            ],
            [
              -0.08824,
              51.50599
            ],
            [
              -0.08824,
              51.50599
            ],
            [
              -0.0882,
              51.50602
            ],
            [
              -0.08825,
              51.50605
            ],
            [
              -0.08842,
              51.50618
            ],
            [
              -0.08848,
              51.50611
            ],
            [
              -0.08872,
              51.50587
            ],
            [
              -0.08886,
              51.50573
            ],
            [
              -0.08886,
              51.50573
            ],
            [
              -0.08897,
              51.50579
            ],
            [
              -0.08895,
              51.50583
            ],
            [
              -0.08891,
              51.50589
            ],
            [
              -0.08891,
              51.50589
            ],
            [
              -0.0888,
              51.50607
            ],
            [
              -0.08893,
              51.50612
            ],
            [
              -0.08889,
              51.50623
            ],
            [
              -0.08898,
              51.50624
            ],
            [
              -0.08897,
              51.50625
            ],
            [
              -0.08892,
              51.5064
            ]
          ]
        }
      ],
      "departure_time": "15:21",
      "arrival_time": "16:02"
    },
    {
      "duration": "00:41:00",
      "route_parts": [
        {
          "mode": "foot",
          "from_point_name": "25 St Pancras Way, Camden",
          "to_point_name": "Camden Town Station",
          "destination": "",
          "line_name": "",
          "duration": "00:16:00",
          "departure_time": "15:24",
          "arrival_time": "15:40",
          "coordinates": [
            [
              -0.13461,
              51.5393
            ],
            [
              -0.13507,
              51.53955
            ],
            [
              -0.13608,
              51.53914
            ],
            [
              -0.13635,
              51.53936
            ],
            [
              -0.13662,
              51.53968
            ],
            [
              -0.13662,
              51.53968
            ],
            [
              -0.13698,
              51.53983
            ],
            [
              -0.13698,
              51.53983
            ],
            [
              -0.13947,
              51.54069
            ],
            [
              -0.13989,
              51.5405
            ],
            [
              -0.14104,
              51.54003
            ],
            [
              -0.14167,
              51.53968
            ],
            [
              -0.14223,
              51.53933
            ],
            [
              -0.14244,
              51.53915
            ],
            [
              -0.14242,
              51.53929
            ],
            [
              -0.14249,
              51.5393
            ],
            [
              -0.14249,
              51.5393
            ],
            [
              -0.14259,
              51.53911
            ],
            [
              -0.14248,
              51.53917
            ],
            [
              -0.14296,
              51.53927
            ]
          ]
        },
        {
          "mode": "tube",
          "from_point_name": "Camden Town",
          "to_point_name": "London Bridge",
          "destination": "Morden via Bank",
          "line_name": "Northern",
          "duration": "00:14:00",
          "departure_time": "15:40",
          "arrival_time": "15:54",
          "coordinates": [
            [
              -0.14297,
              51.53927
            ],
            [
              -0.14209,
              51.53826
            ],
            [
              -0.14187,
              51.53775
            ],
            [
              -0.14175,
              51.53695
            ],
            [
              -0.14187,
              51.53307
            ],
            [
              -0.14172,
              51.53249
            ],
            [
              -0.14146,
              51.53188
            ],
            [
              -0.14106,
              51.53126
            ],
            [
              -0.1407,
              51.53092
            ],
            [
              -0.13891,
              51.52955
            ],
            [
              -0.13829,
              51.52913
            ],
            [
              -0.13735,
              51.52863
            ],
            [
              -0.13673,
              51.52838
            ],
            [
              -0.13506,
              51.52782
            ],
            [
              -0.13436,
              51.52775
            ],
            [
              -0.13357,
              51.52786
            ],
            [
              -0.13233,
              51.52834
            ],
            [
              -0.13233,
              51.52834
            ],
            [
              -0.12892,
              51.52967
            ],
            [
              -0.12634,
              51.53067
            ],
            [
              -0.12568,
              51.53084
            ],
            [
              -0.12218,
              51.53082
            ],
            [
              -0.12189,
              51.53084
            ],
            [
              -0.12189,
              51.53084
            ],
            [
              -0.11968,
              51.53097
            ],
            [
              -0.11421,
              51.53144
            ],
            [
              -0.10917,
              51.53187
            ],
            [
              -0.10642,
              51.53196
            ],
            [
              -0.10594,
              51.53189
            ],
            [
              -0.10594,
              51.53189
            ],
            [
              -0.1056,
              51.53184
            ],
            [
              -0.10176,
              51.53093
            ],
            [
              -0.09782,
              51.5299
            ],
            [
              -0.08991,
              51.52787
            ],
            [
              -0.08883,
              51.52749
            ],
            [
              -0.08841,
              51.52718
            ],
            [
              -0.08824,
              51.527
            ],
            [
              -0.08797,
              51.52657
            ],
            [
              -0.08768,
              51.52596
            ],
            [
              -0.08755,
              51.52498
            ],
            [
              -0.08755,
              51.52498
            ],
            [
              -0.0874,
              51.52394
            ],
            [
              -0.0869,
              51.52192
            ],
            [
              -0.08694,
              51.52156
            ],
            [
              -0.08737,
              51.5199
            ],
            [
              -0.08763,
              51.51922
            ],
            [
              -0.0878,
              51.51892
            ],
            [
              -0.0878,
              51.51892
            ],
            [
              -0.08869,
              51.51726
            ],
            [
              -0.08905,
              51.51593
            ],
            [
              -0.08954,
              51.51481
            ],
            [
              -0.08955,
              51.51438
            ],
            [
              -0.08873,
              51.51319
            ],
            [
              -0.0883,
              51.5128
            ],
            [
              -0.0879,
              51.51231
            ],
            [
              -0.0879,
              51.51231
            ],
            [
              -0.08764,
              51.512
            ],
            [
              -0.08684,
              51.51101
            ],
            [
              -0.08658,
              51.51055
            ],
            [
              -0.0866,
              51.51021
            ],
            [
              -0.08701,
              51.50889
            ],
            [
              -0.08758,
              51.50732
            ],
            [
              -0.08821,
              51.50612
            ],
            [
              -0.08861,
              51.50572
            ]
          ]
        },
        {
          "mode": "foot",
          "from_point_name": "London Bridge Station",
          "to_point_name": "10 Montague Close, Southwark",
          "destination": "",
          "line_name": "",
          "duration": "00:11:00",
          "departure_time": "15:54",
          "arrival_time": "16:05",
          "coordinates": [
            [
              -0.0886,
              51.50572
            ],
            [
              -0.08648,
              51.50577
            ],
            [
              -0.08706,
              51.50575
            ],
            [
              -0.08824,
              51.50599
            ],
            [
              -0.08824,
              51.50599
            ],
            [
              -0.0882,
              51.50602
            ],
            [
              -0.08825,
              51.50605
            ],
            [
              -0.08842,
              51.50618
            ],
            [
              -0.08848,
              51.50611
            ],
            [
              -0.08872,
              51.50587
            ],
            [
              -0.08886,
              51.50573
            ],
            [
              -0.08886,
              51.50573
            ],
            [
              -0.08897,
              51.50579
            ],
            [
              -0.08895,
              51.50583
            ],
            [
              -0.08891,
              51.50589
            ],
            [
              -0.08891,
              51.50589
            ],
            [
              -0.0888,
              51.50607
            ],
            [
              -0.08893,
              51.50612
            ],
            [
              -0.08889,
              51.50623
            ],
            [
              -0.08898,
              51.50624
            ],
            [
              -0.08897,
              51.50625
            ],
            [
              -0.08892,
              51.5064
            ]
          ]
        }
      ],
      "departure_time": "15:24",
      "arrival_time": "16:05"
    }
  ]
}



'''
